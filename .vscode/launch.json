{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug ST-Link + OpenOCD",
      "type": "cortex-debug",
      "request": "launch",
      "servertype": "openocd",

      "cwd": "${command:cmake.buildDirectory}",
      "executable": "${command:cmake.launchTargetPath}",

      "device": "${config:stm32.device}",
      "svdFile": "${config:stm32.svd}",

      "liveWatch": { "enabled": true, "samplesPerSecond": 4, "refreshRateMs": 250 },
      "runToEntryPoint": "main",
      "preLaunchTask": "CMake: build",

      "configFiles": [
        "${config:openocd.interfaceCfg}",
        "${config:openocd.targetCfg}"
      ],
      "serverpath": "openocd",
      "searchDir": ["${config:openocd.searchDir}"],

      "postLaunchCommands": ["monitor reset halt"],
      "postRestartCommands": ["monitor reset halt"]
    }
  ]
}
